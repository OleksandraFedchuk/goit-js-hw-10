{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    validateDate();\n  },\n\n};\n\nflatpickr('#datetime-picker' , options);\n\nconst elements = {\n  timer: document.querySelector('.timer'),\n  days : document.querySelector('span[data-days]'),\n  hours: document.querySelector('span[data-hours]'),\n  minutes : document.querySelector('span[data-minutes]'),\n  seconds : document.querySelector('span[data-seconds]'),\n  button: document.querySelector('button[data-start]'),\n  picker: document.querySelector('#datetime-picker'),\n}\n\nlet userSelectedDate = null ; \nelements.button.disabled = userSelectedDate === null || userSelectedDate < Date.now();\n\nfunction validateDate(){\n  if (userSelectedDate < Date.now()){\n    iziToast.show({\n      message: \"Please choose a date in the future\",\n      position: \"topCenter\",\n      closeOnEscape: true,\n      closeOnClick: true,\n    });\n    elements.button.disabled = true;\n  } else {\n    elements.button.disabled = false;\n  }\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateTimerFace({days, hours, minutes, seconds}) {\n  elements.days.textContent = addLeadingZero(days);\n  elements.hours.textContent = addLeadingZero(hours);\n  elements.minutes.textContent = addLeadingZero(minutes);\n  elements.seconds.textContent = addLeadingZero(seconds);\n  return\n};\n\nlet countInterval = null; \n\nfunction startCount() {\n  countInterval = setInterval(() => {\nconst delta = userSelectedDate - Date.now() ;\n\nif (delta <= 0){\n  clearInterval(countInterval);\n  updateTimerFace({ days: \"00\", hours: \"00\",minutes: \"00\", seconds: \"00\"});\n  elements.button.disabled = true; \n  elements.picker.disabled = false;\n  return;\n}\nconst time = convertMs(delta);\nupdateTimerFace(time);\n  }, 1000);\n}\n\nelements.button.addEventListener(\"click\", () => {\nif(!userSelectedDate) return;\n\nif(countInterval){\n  clearInterval(countInterval);\n}\n\nelements.picker.disabled = true ;\nelements.button.disabled = true;\n\nstartCount();\n  \n});\n\n\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["options","selectedDates","userSelectedDate","validateDate","flatpickr","elements","iziToast","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","updateTimerFace","countInterval","startCount","delta","time"],"mappings":"0IAMA,MAAMA,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAmBD,EAAc,CAAC,EAClCE,GACD,CAEH,EAEAC,EAAU,mBAAqBJ,CAAO,EAEtC,MAAMK,EAAW,CACf,MAAO,SAAS,cAAc,QAAQ,EACtC,KAAO,SAAS,cAAc,iBAAiB,EAC/C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAU,SAAS,cAAc,oBAAoB,EACrD,QAAU,SAAS,cAAc,oBAAoB,EACrD,OAAQ,SAAS,cAAc,oBAAoB,EACnD,OAAQ,SAAS,cAAc,kBAAkB,CACnD,EAEA,IAAIH,EAAmB,KACvBG,EAAS,OAAO,SAAWH,IAAqB,MAAQA,EAAmB,KAAK,MAEhF,SAASC,GAAc,CACjBD,EAAmB,KAAK,OAC1BI,EAAS,KAAK,CACZ,QAAS,qCACT,SAAU,YACV,cAAe,GACf,aAAc,EACpB,CAAK,EACDD,EAAS,OAAO,SAAW,IAE3BA,EAAS,OAAO,SAAW,EAE/B,CAEA,SAASE,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASC,EAAgB,CAAC,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACxDP,EAAS,KAAK,YAAcQ,EAAeJ,CAAI,EAC/CJ,EAAS,MAAM,YAAcQ,EAAeH,CAAK,EACjDL,EAAS,QAAQ,YAAcQ,EAAeF,CAAO,EACrDN,EAAS,QAAQ,YAAcQ,EAAeD,CAAO,CAEvD,CAEA,IAAII,EAAgB,KAEpB,SAASC,GAAa,CACpBD,EAAgB,YAAY,IAAM,CACpC,MAAME,EAAQhB,EAAmB,KAAK,MAEtC,GAAIgB,GAAS,EAAE,CACb,cAAcF,CAAa,EAC3BD,EAAgB,CAAE,KAAM,KAAM,MAAO,KAAK,QAAS,KAAM,QAAS,IAAI,CAAC,EACvEV,EAAS,OAAO,SAAW,GAC3BA,EAAS,OAAO,SAAW,GAC3B,MACF,CACA,MAAMc,EAAOZ,EAAUW,CAAK,EAC5BH,EAAgBI,CAAI,CACjB,EAAE,GAAI,CACT,CAEAd,EAAS,OAAO,iBAAiB,QAAS,IAAM,CAC5CH,IAEDc,GACD,cAAcA,CAAa,EAG7BX,EAAS,OAAO,SAAW,GAC3BA,EAAS,OAAO,SAAW,GAE3BY,IAEA,CAAC"}